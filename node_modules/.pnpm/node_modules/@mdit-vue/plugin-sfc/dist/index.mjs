const sfcPlugin = (md, { customBlocks = [] } = {}) => {
  const sfcBlocks = Array.from(/* @__PURE__ */ new Set(["script", "style", ...customBlocks]));
  const sfcBlocksRegexp = new RegExp(`^<(${sfcBlocks.join("|")})(?=(\\s|>|$))`, "i");
  const rawRule = md.renderer.rules.html_block;
  md.renderer.rules.html_block = (tokens, idx, options, env, self) => {
    const content = tokens[idx].content;
    if (sfcBlocksRegexp.test(content.trim())) {
      env.sfcBlocks ?? (env.sfcBlocks = []);
      env.sfcBlocks.push(content);
      return "";
    }
    return rawRule(tokens, idx, options, env, self);
  };
};

export { sfcPlugin };
