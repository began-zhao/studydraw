{"version":3,"file":"index.js","sources":["../../src/node/utils.ts","../../src/node/compact/utils.ts","../../src/node/generateServiceWorker.ts","../../src/node/helper.ts","../../src/node/locales.ts","../../src/node/prepare.ts","../../src/node/plugin.ts","../../src/node/compact/convert.ts","../../src/node/generateManifest.ts","../../src/node/injectHead.ts"],"sourcesContent":[null,null,null,null,null,null,null,null,null,null],"names":["logger","Logger","deprecatedLogger","options","deprecatedOption","newOption","msg","scope","warn","includes","keys","split","temp","forEach","key","index","length","imageFilter","outDir","maxsize","manifestEntries","warnings","manifest","imageExtensions","entry","some","ext","url","endsWith","stats","fs","statSync","path","resolve","size","push","Math","ceil","appendBaseHelper","base","link","startsWith","replace","appendBase","favicon","apple","icon","maskIcon","msTile","image","icons","map","src","shortcuts","shortcut","screenshots","screenshot","appendBasetoManifest","pwaLocales","install","iOSInstall","cancel","close","prevImage","nextImage","desc","feature","explain","hint","update","CLIENT_FOLDER","ensureEndingSlash","__dirname","pwaPlugin","legacy","app","convertOptions","env","isDebug","info","toString","shouldPrefetch","async","dir","siteData","userManifestPath","source","userManifestJSONPath","optionManifest","userManifest","JSON","parse","existsSync","readFile","name","title","locales","short_name","description","lang","getRootLang","start_url","display","theme_color","themeColor","background_color","orientation","prefer_related_applications","getManifest","head","metaKeys","linkKeys","item","fallBackIcon","setLink","rel","href","more","setMeta","content","type","sizes","crossorigin","statusBarColor","color","injectLinkstoHead","useSassPalettePlugin","id","define","PWA_LOCALES","getLocales","default","config","SW_FORCE_UPDATE","SW_PATH","swPath","extendsBundlerOptions","addViteOptimizeDepsInclude","addViteSsrNoExternal","useCustomDevServer","stringify","onGenerated","load","manifestPath","dest","writeJSON","flag","succeed","chalk","cyan","relative","process","cwd","generateManifest","swDest","destDir","globPatterns","cacheHTML","cachePic","generateSW","globDirectory","cacheId","cleanupOutdatedCaches","clientsClaim","maximumFileSizeToCacheInBytes","maxSize","manifestTransforms","maxPicSize","generateSWConfig","then","count","toFixed","warning","join","error","blue","generateServiceWorker","clientConfigFile","configImport","rootComponents","showInstall","hintComponent","updateComponent","writeTemp","prepareConfigFile"],"mappings":"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"}