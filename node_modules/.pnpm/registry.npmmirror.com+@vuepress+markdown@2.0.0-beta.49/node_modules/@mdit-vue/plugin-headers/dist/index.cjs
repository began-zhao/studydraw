'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

const shared = require('@mdit-vue/shared');

const headersPlugin = (md, { level = [2, 3], slugify = shared.slugify, format } = {}) => {
  let headers;
  md.core.ruler.push("resolveHeaders", (state) => {
    headers = shared.resolveHeadersFromTokens(state.tokens, {
      level,
      shouldAllowHtml: false,
      shouldEscapeText: false,
      slugify,
      format
    });
    return true;
  });
  const render = md.render.bind(md);
  md.render = (src, env = {}) => {
    const result = render(src, env);
    env.headers = headers;
    return result;
  };
};

exports.headersPlugin = headersPlugin;
